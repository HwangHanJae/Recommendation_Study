# Mini Reco

## 회고(self feedback)

사용자 기반 협업 필터링 모델을 표준 라이브러리만 이용하여 해결하는 문제였습니다.

저는 표준 라이브러리만 사용하는 코드와 외부 라이브러리를 사용하는 코드, 두 가지를 작성하여 문제를 해결하였습니다.

문제를 해결하는 과정에서 testcase를 입력하고 정답과 비교하는 과정에서 시간 소모가 많다는 것을 느껴  
testcase의 input, output을 각 number에 맞게 입력하는 테스트 케이스를 자동 입력해주는 코드를 작성하여 테스트를 진행하였습니다.

수식을 코드로 구현하고 정답과 비교하여 평가를 진행하는데 여러 testcase에서 ndcg의 값이 0.6~0.7 정도로 기준점수(0.9)를 통과하지 못하는 문제가 발생하였습니다.  
여러 시도 끝에 혼자 해결할 수 없다고 판단하여  
카카오 추천팀에 정답 코드를 공유해 줄 수 있는지 문의하였고, 정말 감사하게도 추천팀에서 정답코드를 공유해주어 제가 작성한 코드에서 잘 못 작성한 부분을 발견할 수 있었습니다.

![image](https://user-images.githubusercontent.com/60374463/210053805-d2864ea4-af33-4576-8609-1ab5a423bacb.png)
위의 수식에서 normalizing factor k(첫 번째 밑줄 부분)를 구하는 과정에서 발생한 문제였습니다.

제가 작성한 코드에서는 각 "가중치(특정 사용자와 유사 사용자의 코사인유사도) x 평점(유사 사용자의 특정 아이템에 대한 평가값)"(두번째 밑줄 부분)을 구할 때 평점(유사 사용자가 특정 아이템에 대한 평가값)을 구할 수 없다면 해당 유사 사용자를 제외하여 값을 올바르게 구했지만  
normalizing factor k(첫 번째 밑줄 부분)를 구할 때는 유사 사용자를 제외하지 않았고 rui를 구할 때에도 영향을 주어 output이 달랐던 것 입니다.

"가중치 x 평점"을 구할 때는 평점(유사 사용자가 특정 아이템에 대한 평가값)이 None으로 반환되게 코드를 작성하여 오류를 피하려고 운이 좋게 유사 사용자를 제외하였고, 수식에서 각 항이 어떤 의미를 갖는지에 대한 고민이 부족하여 문제가 발생한 것으로 생각됩니다.

사용자 기반 협업 필터링은 
1. 특정 사용자와 다른 사용자의 유사도(가중치)를 계산하여 유사 사용자(최근접 이웃)을 구함
2. 최근접 이웃과의 유사도(가중치), 최근접 이웃이 특정 아이템에 부여한 평점, 최근접 이웃의 평균을 활용하여 예측값을 계산

크게 두 가지 과정을 거치게 됩니다.

이때 최근접 이웃이라고 하더라도 아이템에 대해 평점을 부여하지 않았다면 예측값을 계산하는 과정에서 제외해야 한다는 것을 배울 수 있었고 수식에서 각 항이 어떤 의미를 갖는지에 대해 생각해봐야 한다는 것을 깨달을 수 있었습니다.











